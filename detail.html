<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Détail — Adele in Paris</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="https://fonts.googleapis.com/css2?family=Sora:wght@400;600;800&display=swap" rel="stylesheet">
<style>
  * { box-sizing: border-box; margin: 0; padding: 0; }
  body { font-family: 'Sora', sans-serif; background: #fff; color: #111; overflow-x: hidden; }
  a { text-decoration: none; }

  /* ===== HERO ===== */
  .hero {
    position: relative;
    width: 100%;
    height: 100vh;
    overflow: hidden;
  }
  .hero img {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
  }
  .hero-content {
    position: absolute;
    z-index: 2;
    text-align: center;
    color: #fff;
    width: 100%;
    opacity: 0;
    transform: translateY(20px);
    animation: fadeSlideUp 1s forwards;
    animation-delay: 0.5s;
  }
  .hero-content h1 {
    font-size: clamp(3rem, 8vw, 6rem);
    font-weight: 800;
    margin-bottom: 1rem;
  }
  .hero-content p {
    font-size: clamp(1.2rem, 3vw, 2rem);
    font-weight: 400;
  }
  @keyframes fadeSlideUp {
    to { opacity: 1; transform: translateY(0); }
  }

  /* ===== SECTION ===== */
  .section {
    padding: 40px 20px;
  }
  .description {
    white-space: pre-wrap;
    margin-bottom: 30px;
  }
  .infos {
    margin-bottom: 30px;
    line-height: 1.5;
  }
  .infos p { margin: 4px 0; }
  .gallery {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 16px;
  }
  .gallery img {
    width: 100%;
    border-radius: 12px;
    object-fit: cover;
  }

  /* ===== STICKY GO BUTTON ===== */
  .go-btn {
    position: sticky;
    bottom: 20px;
    display: inline-block;
    background: #000;
    color: #fff;
    padding: 14px 24px;
    border-radius: 50px;
    font-weight: 600;
    cursor: pointer;
    text-align: center;
    font-size: 1rem;
    z-index: 10;
  }

  /* ===== BACK BUTTON ===== */
  .back-btn {
    position: fixed;
    top: 20px;
    left: 20px;
    z-index: 20;
    font-size: 2rem;
    cursor: pointer;
    color: #fff;
    background: rgba(0,0,0,0.4);
    border-radius: 50%;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  /* ===== RESPONSIVE ===== */
  @media(max-width:768px){
    .hero-content {
      text-align: left;
      bottom: 20px;
      left: 20px;
      width: calc(100% - 40px);
    }
    .hero-content h1 { font-size: clamp(2rem, 8vw, 4rem); }
    .hero-content p { font-size: clamp(1rem, 4vw, 1.5rem); }
  }

</style>
</head>
<body>

<div class="hero">
  <img class="hero-img" src="" alt="Hero">
  <div class="hero-content">
    <h1 id="title"></h1>
    <p id="subtitle"></p>
  </div>
  <div class="back-btn" onclick="history.back()">←</div>
</div>

<div class="section" id="section">
  <div class="description" id="description"></div>
  <div class="infos" id="infos"></div>
  <div class="gallery" id="gallery"></div>
  <a class="go-btn" href="#" id="goBtn">GO</a>
</div>

<script>
const currentReco = JSON.parse(localStorage.getItem("currentReco"));

if (!currentReco) {
  window.location.href = "index.html";
}

// HERO IMAGE
const heroImg = document.querySelector(".hero-img");
if (window.innerWidth <= 768 && currentReco.background) {
  heroImg.src = currentReco.background.startsWith("http") ? currentReco.background : `images/${currentReco.background}`;
} else if (currentReco.fullscreen) {
  heroImg.src = currentReco.fullscreen.startsWith("http") ? currentReco.fullscreen : `images/${currentReco.fullscreen}`;
}

// HERO TEXT
document.getElementById("title").innerText = currentReco.title || "";
document.getElementById("subtitle").innerText = currentReco.subtitle || "";
if(currentReco.color_secondary){
  document.getElementById("title").style.color = `#${currentReco.color_secondary}`;
  document.getElementById("subtitle").style.color = `#${currentReco.color_secondary}`;
}

// SECTION BACKGROUND & TEXT COLOR
if(currentReco.color){
  document.getElementById("section").style.backgroundColor = `#${currentReco.color}`;
  document.getElementById("section").style.color = currentReco.color_secondary ? `#${currentReco.color_secondary}` : "#fff";
}

// DESCRIPTION
document.getElementById("description").innerText = currentReco.description || "";

// INFOS
const infosDiv = document.getElementById("infos");
if(currentReco.start_date && currentReco.end_date){
  const startDate = new Date(currentReco.start_date);
  const endDate = new Date(currentReco.end_date);
  const options = { day: "numeric", month: "long", year: "numeric" };
  infosDiv.innerHTML = `<p>${startDate.toLocaleDateString("fr-FR", options)} → ${endDate.toLocaleDateString("fr-FR", options)}</p>`;
}
if(currentReco.prix){
  infosDiv.innerHTML += `<p>Prix : ${currentReco.prix}</p>`;
}

// GALLERY
const galleryDiv = document.getElementById("gallery");
let i = 1;
while(currentReco[`photo${i}`]){
  const img = document.createElement("img");
  img.src = currentReco[`photo${i}`].startsWith("http") ? currentReco[`photo${i}`] : `photos/${currentReco[`photo${i}`]}`;
  galleryDiv.appendChild(img);
  i++;
}

// GO BUTTON
const goBtn = document.getElementById("goBtn");
if(currentReco.URL){
  goBtn.href = currentReco.URL;
  goBtn.target = "_blank";
}
</script>

</body>
</html>
