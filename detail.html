<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Détail — Adele in Paris</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
  @import url('https://fonts.googleapis.com/css2?family=Sora:wght@400;600;700&display=swap');
  body {margin:0;padding:0;font-family:'Sora',sans-serif; background:#fff; color:#111;}
  .hero {position:relative;width:100%;height:100vh;overflow:hidden;}
  .hero img {position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;}
  .hero-content {position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);text-align:center;}
  .hero-content h1 {font-size:4rem;margin-bottom:10px;}
  .hero-content p {font-size:2rem;}
  @media (max-width:768px){
    .hero-content {top:auto; bottom:20px; left:20px; transform:none; text-align:left;}
    .hero-content h1{font-size:2rem;}
    .hero-content p{font-size:1.2rem;}
  }
  .section {padding:40px; border-radius:12px; margin:20px;}
  .section h2 {margin-bottom:16px;}
  .gallery img{border-radius:12px;margin:8px 0;width:100%;height:auto;display:block;}
  #go-btn {position:fixed;bottom:20px;right:20px;padding:12px 24px;background:#000;color:#fff;border:none;border-radius:24px;font-size:1rem;cursor:pointer;z-index:10;}
  #back-btn {position:fixed;top:20px;left:20px;font-size:2rem;cursor:pointer;z-index:10;color:#000;}
</style>
</head>
<body>

<div id="back-btn">&#8592;</div>

<section class="hero">
  <img id="hero-img" src="" alt="">
  <div class="hero-content">
    <h1 id="hero-title"></h1>
    <p id="hero-subtitle"></p>
  </div>
</section>

<section class="section" id="detail-section">
  <div id="description"></div>
  <div id="infos"></div>
  <div class="gallery" id="gallery"></div>
</section>

<button id="go-btn">GO</button>

<script>
const data = JSON.parse(localStorage.getItem("detailData")||"{}");
if(!data.title){ alert("Impossible de charger la reco"); }

const heroImg = document.getElementById("hero-img");
const heroTitle = document.getElementById("hero-title");
const heroSubtitle = document.getElementById("hero-subtitle");
const descDiv = document.getElementById("description");
const infosDiv = document.getElementById("infos");
const galleryDiv = document.getElementById("gallery");

heroImg.src = window.innerWidth>768 ? (data.fullscreen||"") : (data.background||"");
heroTitle.innerText = data.title||"";
heroSubtitle.innerText = data.subtitle||"";

descDiv.innerHTML = (data.description||"").replace(/\n/g,"<br>").replace(/,/g,", ");

const startDate = data.start_date ? new Date(data.start_date) : null;
const endDate = data.end_date ? new Date(data.end_date) : null;
function formatDate(d){
  if(!d) return "";
  return d.getDate()+" "+d.toLocaleString("fr-FR",{month:"long"})+" "+d.getFullYear();
}

infosDiv.innerHTML = `<h2>Infos</h2>
<p>${startDate?formatDate(startDate):""} au ${endDate?formatDate(endDate):""}</p>
<p>Prix : ${data.prix||""}</p>
<p>Lieu : ${data.lieu||""}</p>`;

// Galerie
galleryDiv.innerHTML="";
for(let i=1;i<=5;i++){
  if(data["photo"+i]) {
    const img = document.createElement("img");
    img.src="photos/"+data["photo"+i];
    galleryDiv.appendChild(img);
  }
}

// GO button
document.getElementById("go-btn").onclick = ()=>{
  if(data.URL) window.open(data.URL,"_blank");
};

// Back button
document.getElementById("back-btn").onclick = ()=>window.history.back();
</script>
</body>
</html>
