<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Détails — Adele in Paris</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://fonts.googleapis.com/css2?family=Sora:wght@400;600;900&display=swap" rel="stylesheet">

  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: 'Sora', sans-serif; background: #fff; color: #111; }

    /* ===== HERO ===== */
    .hero {
      position: relative;
      width: 100%;
      height: 100vh;
      overflow: hidden;
    }

    .hero img.desktop, .hero img.mobile {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      z-index: 0;
    }

    .hero img.desktop { display: block; }
    .hero img.mobile { display: none; }
    @media(max-width:768px){
      .hero img.desktop { display: none; }
      .hero img.mobile { display: block; }
    }

    .hero .text {
      position: absolute;
      color: inherit;
      z-index: 2;
      text-align: center;
      width: 100%;
      opacity: 0;
      transition: opacity 0.8s ease;
    }

    .hero .text h1 {
      font-size: clamp(4rem, 8vw, 8rem);
      font-weight: 900;
    }

    .hero .text h2 {
      font-size: clamp(1.5rem, 3vw, 2rem);
      font-weight: 400;
      margin-top: 0.5em;
    }

    /* Desktop center vertically */
    @media(min-width:769px){
      .hero .text { top: 50%; transform: translateY(-50%); text-align: center; }
    }

    /* Mobile bottom left */
    @media(max-width:768px){
      .hero .text { bottom: 20px; left: 20px; text-align: left; transform: none; }
    }

    /* ===== SECTION DETAIL ===== */
    .detail-section {
      padding: 40px 20px;
    }

    .detail-section h3 { font-weight: 600; margin-bottom: 10px; }
    .detail-section p { white-space: pre-line; line-height: 1.6; margin-bottom: 20px; }

    .info-block { margin-bottom: 20px; }
    .info-block span { display: block; }

    /* ===== GALERIE ===== */
    .gallery {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 16px;
      margin-bottom: 40px;
    }

    .gallery img {
      width: 100%;
      border-radius: 12px;
      object-fit: cover;
    }

    /* ===== BOUTONS ===== */
    .go-button {
      position: sticky;
      bottom: 20px;
      display: block;
      width: 90%;
      max-width: 300px;
      margin: 0 auto 20px auto;
      padding: 14px;
      font-size: 1rem;
      font-weight: 600;
      text-align: center;
      background-color: #000;
      color: #fff;
      border: none;
      border-radius: 999px;
      cursor: pointer;
      text-decoration: none;
    }

    .back-button {
      position: fixed;
      top: 20px;
      left: 20px;
      font-size: 2rem;
      text-decoration: none;
      color: #000;
      font-weight: bold;
      z-index: 10;
    }
  </style>
</head>
<body>

  <a href="generate.html" class="back-button">&#8592;</a>

  <section class="hero">
    <img class="desktop" src="" alt="hero desktop">
    <img class="mobile" src="" alt="hero mobile">
    <div class="text">
      <h1></h1>
      <h2></h2>
    </div>
  </section>

  <section class="detail-section">
    <div class="description">
      <p></p>
    </div>
    <div class="info-block">
      <h3>Infos</h3>
      <span class="dates"></span>
      <span class="prix"></span>
      <span class="lieu"></span>
    </div>
    <div class="gallery"></div>
    <a class="go-button" href="" target="_blank">GO</a>
  </section>

  <script>
    // récupérer les données depuis localStorage
    const detailData = JSON.parse(localStorage.getItem("detailData"));

    if(!detailData){
      document.body.innerHTML = "<p>Impossible de charger la reco.</p>";
    } else {
      // hero images
      document.querySelector(".hero img.desktop").src = detailData.fullscreen || "";
      document.querySelector(".hero img.mobile").src = detailData.background || "";

      // text
      const h1 = document.querySelector(".hero .text h1");
      const h2 = document.querySelector(".hero .text h2");
      h1.innerText = detailData.title || "";
      h2.innerText = detailData.subtitle || "";
      setTimeout(()=> document.querySelector(".hero .text").style.opacity = 1, 500);

      // description
      document.querySelector(".description p").innerText = detailData.description || "";

      // format dates
      function formatDate(d){
        if(!d) return "";
        const date = new Date(d);
        if(isNaN(date)) return "";
        return date.toLocaleDateString("fr-FR", {day:"2-digit", month:"long", year:"numeric"});
      }
      const dates = document.querySelector(".dates");
      dates.innerText = `${formatDate(detailData.start_date)} au ${formatDate(detailData.end_date)}`;

      // prix
      document.querySelector(".prix").innerText = detailData.prix || "";

      // lieu
      document.querySelector(".lieu").innerText = detailData.lieu || "";

      // galerie
      const galleryDiv = document.querySelector(".gallery");
      const photos = [];
      for(let i=1;i<=5;i++){
        if(detailData["photo"+i]) photos.push(detailData["photo"+i]);
      }
      photos.forEach(p=>{
        const img = document.createElement("img");
        img.src = "photos/"+p;
        galleryDiv.appendChild(img);
      });

      // bouton GO
      const goBtn = document.querySelector(".go-button");
      goBtn.href = detailData.URL || "#";
    }
  </script>

</body>
</html>
